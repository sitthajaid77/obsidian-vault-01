---
type: worklog
week: 2026-W04
date_range: 2026-01-19 to 2026-01-23
date_created: 2026-01-19
tags: [worklog, weekly]
---

# WorkLog Week 04 (2026)

**Period:** 19 Jan 2026 to 23 Jan 2026

---

## 19Jan26
- Asked Yuexin AMT about Tizen 6.0 issue status
- Yuexin AMT replied: "The Cognito token for the stage environment has expired at present. We will verify and test it after the token is updated"
- [completed] Ask K. Noom (Monomax) for new cognito token for 'https://staging-entitlement-ais.monomax.me/drm/token'

---

## 20Jan26
- Vendor OVP (ZTE) reported issue from loop testing manifest file requests: ZTE manipulator → nea-cdn (packager)
  - **Error Code:** 15022000 - Empty SegmentTimeline (IndexOutOfBoundsException)
  - **Root Cause:** Incomplete manifest from AIS nea-cdn (packager)
  - **Channel:** V0015
  - **Issue:** Video AdaptationSet (id="3") has empty SegmentTimeline `<SegmentTimeline />`
  - Audio AdaptationSets contain complete SegmentTimeline
  - Contacted packager team for investigation
- ATEME support (N.Ton) investigation on IndexOutOfBound error(manifest incomplete):
  - Found PID missing from source (encoder) when viewed from packager's log
  - Correlates with high 'index out of bound' errors in NPAW (e.g., 19Jan26 ~14:17 and ~15:02)
  - Strong indication that source (encoder) has issues
  - ATEME support working on simulation method
  - Next steps:
    - Trace issue to encoder to identify root cause
    - If source issue cannot be fixed easily, need to optimize player to handle this case
- [completed] Requested N.Ton (ATEME support) to whitelist ZTE IPs on nea-cdn staging:
  - IPv4: 43.209.73.245
  - IPv6: 2406:da14:8a11:2c01:f96c:6dff:7e1c:60d9
- [completed] Tested Dolby Vision and ATMOS playback on iPhone:
  - Channel 101 (h264, Irdeto DRM): playback normal, screen capture blocked
  - Channel 952 (h265, Dolby Vision/ATMOS, Irdeto DRM): playback normal, screen capture blocked
  - Channel 953 (h265, Dolby Vision, no DRM): playback normal
  - Documented in [[kb-mobile/dolby-vision-and-atmos]]
- [completed] request cognito token from K. Noom (Monomax) and sent to Cao ZTE

---

## 21Jan26
- IndexOutOfBound error investigation update:
  - Reviewed packager and encoder logs
  - **Confirmed:** Feed unavailable issue from encoder/source
  - **Impact:** Packager generates incomplete manifest files
  - **Next action:** Coordinate with ZTE/AMT to adjust player to handle this case gracefully
  - Related: [[kb-stb/app]]
- [completed] Follow up with packager team (confirmed root cause: encoder feed unavailable)
- TODO: Coordinate with ZTE/AMT to adjust player handling for incomplete manifest case
- TODO: Follow up with Yuexin AMT on Tizen 6.0 issue status after cognito token update
- **Samsung TV vertical VOD playback issues investigation update:**
    - **Issue 1:** Subtitle positioning incorrect when playing vertical videos on Samsung TV
        - **Symptom:** Subtitle position is incorrect only on Samsung TV
        - **VO team analysis:**
            - Audio and video duration are mismatched
            - Subtitle positioning data in the stream is not handled correctly
        - **Confirmed:**
            - Video and audio tracks are not aligned in duration
            - Subtitle positioning issue is likely related to vertical video layout + stream metadata
        - **Playback:**
            - MPD: https://packager.dev-ovp.ais.th/vod/alfheim/02202601131530042501/_/DD4/02202601131530042501.mpd
        - **Impact:**
            - Subtitle rendering incorrect on Samsung TV (Tizen player)
        - **Next action:**
            - Validate subtitle track metadata and positioning logic for vertical content
            - Coordinate with OV team and Samsung/ZTE player team for vertical video handling
- **Samsung TV vertical VOD duration mismatch investigation update:**
    - **Issue 2:** Incorrect duration shown on Samsung TV for certain vertical VOD titles
        - **Standard duration:** 21:44 (consistent across other platforms)
        - **Samsung TV duration:** 23:06 (+ ~1:22)
        - **Symptom:**
            - Playback freezes once video reaches the actual video duration (21:44)
        - **VO team analysis:**
            - Video track duration: 21:44
            - Audio track duration: 23:06
        - **Confirmed:**
            - Audio and video length mismatch in the streaming source
        - **Playback:**
            - MPD: https://packager.dev-ovp.ais.th/vod/alfheim/02202512231540042491/_/DD4/02202512231540042491.mpd
        - **Impact:**
            - Samsung TV player uses audio duration as total content duration
            - Playback freezes after video frames are exhausted
        - **Next action:**
            - Coordinate with encoder/source team to align audio/video durations
            - Confirm expected player behavior when track durations mismatch
- Investigated iPhone/iPad error -12927 during Dolby live channel switching(Dolby Vision and ATMOS playback on iPhone):
  - **Issue:** Error -12927 (CoreMediaErrorDomain) occurs intermittently when switching between channel 953 and 29
  - **Affected channels:** Only channel 29 (H.264 with DRM)
  - **Symptoms:**
    - License request initiated (fetchApplicationCertificate)
    - AVPlayerItem fails ~60ms later before license response received
  - **Log sample timing:**
    - 10:55:24.803: Certificate URL requested
    - 10:55:24.861: AVPlayerItem Status Failed (58ms later)
    - Error: CoreMediaErrorDomain Code=-12927, PlayerRemoteXPC err=-12860
  - TODO: follow up Cao ZTE for this case

---

## 22Jan26
- AMT raised issue: DRM license for Monomax channel 502 (sport41) returns 403 intermittently
	  - **Error message:** "key ID that is not present in the entitlement message"
	  - **Investigation:** KID mismatch between entitlement token and manifest
- [completed] Developed Go script to test and validate entitlement token KID matching for 'https://mbs-svc.3bbtv.com:8443/drm/token' and send the result to K.Kla (JAS) and P.Noom (Mono)
	- TODO: Follow up with K. Kla and P. Noom
- IndexOutOfBound/incomplete manifest handling update:
	- Koi and Faii are working on Media3 code to handle incomplete manifest gracefully
	- **Deadline:** End of this week
	- **Plan:** If incomplete by end of week, will send current progress to ZTE/AMT
	- [completed] Koii completed an interim solution using the Media3 player on Android STB, which allows video playback to continue when this issue occurs
- Meeting for **Orion monitoring for EPL source** with JAS and Orion
	- Currently project stuck on DRM integration
	- Solution depends on a **proxy service** between Orion and **Axinom DRM Key Service**, owned by **K. Kla and P’New’s team**
	- Proxy development is scheduled within **26–30 Jan 2026**
	- Orion integration will start only after the proxy is completed and delivered
	- TODO / Next Action
		- **Follow up with K. Kla and P’New in the next week (target: 29 Jan 2026)** to confirm whether the proxy service is completed and ready for Orion integration

---

## 23Jan26
- Meeting with team P'Pu with Disney team for the topic Disney metadata feed.
- [completed] Vertical VOD Subtitle positioning issue resolved:
	- VO Player team completed fix for subtitle positioning on vertical content
	- Solution now correctly handles horizontal subtitles with vertical content
	- Content Curation Team can now use horizontal subtitles with vertical content without positioning issues
- [completed] Media3 incomplete manifest handling optimization completed:
	- N.Koii successfully optimized Media3 to handle incomplete manifest case
	- Player continues playback when encountering incomplete manifest (may pause but does not crash/error)
	- Resolves IndexOutOfBound error reported by ZTE/AMT
- [completed] Tizen 6.0 DRM retry and display delay issue resolved:
	- Issue resolved in AMT template tested on 2026-01-22
	- No longer requires further development or verification from Pim's side
- [completed] Tested live channel playback without DRM on iPhone with Faii:
	- **Channels tested:** HBO (V0117), mono29 (V0016)
	- **Format:** h264 fMP4 (.m4s)
	- **Player:** VOPlayer on iPhone (Faii embedded playbackURL in Aisplay app)
	- **Manifest manipulator:** Custom manipulator
		- HBO: https://d17kjhxmz8ss3z.cloudfront.net/live/eds/V0016/HN4F/V0016.m3u8
		- mono29: https://d17kjhxmz8ss3z.cloudfront.net/live/eds/V0117/HN4F/V0117.m3u8
	- **Result:** Playback worked normally with no issues
- [completed] Studied STB app code for Channel Properties and DRM flow:
	- **Files analyzed:** `Channel.kt`, `WebActivity.kt`
	- **Key findings:**
		- DRM and Entitlement checks performed in JavaScript Layer (WebView), not Native Android
		- Channel properties: `mediaservices` field indicates DRM requirement
		- Playback flow: User click → WebView loads `/frameset_builder.html` → JS checks DRM → calls Entitlement API → `callAndroidFun()` sends command to Native → Native receives `open`/`openTstv` with params (url, drmscheme, drmlicenseurl) → ExoPlayer plays
		- Native handles DRM configuration with `DrmConfiguration.Builder`
		- Monomax channels require special handling: query string removed from license URL
		- Supported DRM types: widevine, playready, clearkey
	- **Documented in:** [[kb-stb/app]]

---

## Week Summary

### Key Accomplishments
- [Root Cause Identified] IndexOutOfBound error caused by encoder feed unavailable → packager generates incomplete manifest
- [Completed] Whitelist ZTE IPs on nea-cdn staging
- [Completed] Tested Dolby Vision/ATMOS playback on iPhone - documented in [[kb-mobile/dolby-vision-and-atmos]]
- [Completed] Cognito token requested from K. Noom (Monomax) and sent to Cao ZTE
- [Completed] Follow up with packager team - confirmed root cause
- [Completed] Developed Go script to validate entitlement token KID matching for Monomax DRM
- [Completed] N.Koii optimized Media3 to handle incomplete manifest - player continues playback without crash
- [Completed] Meeting for Orion monitoring - proxy development scheduled 26-30 Jan 2026
- [Completed] VO Player team resolved Vertical VOD subtitle positioning issue - horizontal subtitles now display correctly with vertical content
- [Completed] Tizen 6.0 DRM retry and display delay issue resolved in AMT template (tested 2026-01-22)
- [Completed] Tested live channel playback without DRM on iPhone - HBO and mono29 channels with h264 fMP4 format
- [Completed] Studied STB app code for Channel Properties and DRM flow - documented WebView JS layer handling and Native DRM configuration

### In Progress
- [Investigating] Samsung TV vertical VOD duration mismatch issue (audio/video track misalignment)
- [Investigating] iPhone/iPad error -12927 during Dolby live channel switching (channel 29 with DRM)
- [Investigating] DRM license 403 error for Monomax channel 502 - KID mismatch issue

### Blocked / Waiting
- Orion monitoring integration - **Blocked by:** K.Kla and P'New's team, **Waiting for:** Proxy service between Orion and Axinom DRM, **Expected:** 26-30 Jan 2026

### Next Week Focus
- Follow up with K.Kla and P'New on proxy service completion (target: 29 Jan 2026)
- Follow up Cao ZTE on iPhone error -12927
- Follow up K.Kla and P.Noom on entitlement token KID mismatch issue
- Continue investigating Samsung TV vertical VOD duration mismatch issue

---

## Related
- [[WorkAssignment/2026-01-19_to_2026-01-23]]
